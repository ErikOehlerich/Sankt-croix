<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Kort med Flere Funktioner</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw/dist/leaflet.draw.css" />

    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #map {
            height: 600px;  /* Kortets højde */
            width: 100%;  /* Kortets bredde */
            margin: 0 auto;  /* Centrer kortet horisontalt */
            position: relative;
        }
        h1 {
            text-align: center;
            margin-top: 20px;
        }
        #footer {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background-color: #fff;
            padding: 5px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
    </style>
</head>
<body>
    <h1>Sanct Croix Anno 1799</h1>
    <div id="map"></div>
    <div id="footer">Lavet af Erik Luis Lanuza Oehlerich</div>

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-draw/dist/leaflet.draw.js"></script>

    <script>
        // Initialiser kortet
        var map = L.map('map').setView([17.7421648, -64.7560983], 12); // Centrer kortet

        // Definer baggrundskortene
        var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            maxZoom: 19
        });

        var googleSat = L.tileLayer('https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
            attribution: '© Google',
            subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],
            maxZoom: 20
        });

        var googleStreets = L.tileLayer('https://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {
            attribution: '© Google',
            subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],
            maxZoom: 20
        });

        var mapbox = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=your.mapbox.access.token', {
            attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a>',
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1,
            maxZoom: 20
        });

        // Definer dine tile layers som overlay
        var customTiles = L.tileLayer('https://storage.googleapis.com/sanct_croix1799/{z}/{x}/{y}.png', {
            attribution: '© Google Cloud',
            maxZoom: 19
        });

        // Tilføj baggrundskort som basislag
        var baseLayers = {
            "OpenStreetMap": osm,
            "Google Satellite": googleSat,
            "Google Streets": googleStreets,
            "Mapbox Streets": mapbox
        };

        // Tilføj custom tiles som overlay og slå det til som standard
        var overlays = {
            "Custom Tiles": customTiles
        };

        // Tilføj baseLayers og overlays til kortet
        L.control.layers(baseLayers, overlays).addTo(map);

        // Tilføj OSM som standard baggrundskort
        osm.addTo(map);
        customTiles.addTo(map);

        // Markør med billede og CSV fil link
        var coordinates = [17.7078539, -64.7131291]; // Indsæt dine koordinater her
        var image = 'https://raw.githubusercontent.com/erikoehlerich/Sankt-croix-Anno-1799/point39/image.jpg'; // Indsæt URL til dit billede her
        var csvLink = 'https://raw.githubusercontent.com/erikoehlerich/Sankt-croix-Anno-1799/point39/data.csv'; // Indsæt URL til din CSV-fil her

        // Opret en markør
        var marker = L.circleMarker(coordinates, {
            radius: 8,
            color: '#ff7800',
            weight: 1,
            opacity: 1,
            fillOpacity: 0.8
        }).bindPopup(`
            <strong>Navn: Sted 1</strong><br>
            <img src="${image}" alt="Billede" style="width:200px;height:auto;"><br>
            <a href="${csvLink}" target="_blank">Åbn CSV fil</a>
        `).addTo(map); // Tilføj markøren til kortet

        // Yderligere markører kan tilføjes her, hvis nødvendigt
        // Eksempel på en anden markør
        var anotherCoordinates = [17.745, -64.745]; // Indsæt koordinater for en anden markør
        var anotherMarker = L.circleMarker(anotherCoordinates, {
            radius: 8,
            color: '#0077cc',
            weight: 1,
            opacity: 1,
            fillOpacity: 0.8
        }).bindPopup("En anden markør.").addTo(map); // Tilføj den anden markør til kortet

        // Måleværktøj
        var drawnItems = new L.FeatureGroup();
        map.addLayer(drawnItems);
        var drawControl = new L.Control.Draw({
            edit: {
                featureGroup: drawnItems
            },
            draw: {
                polygon: false,
                polyline: true,
                rectangle: false,
                circle: false,
                marker: false
            }
        });
        map.addControl(drawControl);

        // Når en polyline tegnes, tilføj den til drawnItems
        map.on(L.Draw.Event.CREATED, function (event) {
            var layer = event.layer;
            drawnItems.addLayer(layer);
        });

        // Funktion til at vise koordinater når 0 trykkes
        document.addEventListener('keydown', function(event) {
            if (event.key === '0') {
                var mouseCoordinates = map.mouseEventToLatLng(event); // Hent musens koordinater
                alert('Koordinater: ' + mouseCoordinates.lat.toFixed(6) + ', ' + mouseCoordinates.lng.toFixed(6));
            }
        });

    </script>
</body>
</html>
